const translations = {
    en: {
        getExtension: "Get Extension",
        heroTitle: "Try On Clothes From <span class=\"gradient-text\">Any Website</span>",
        heroSubtitle: "Experience the future of online shopping. Use your own photo to virtually try on outfits from any store instantly.",
        addToChrome: "Add to Chrome",
        learnMore: "Learn More",
        howItWorks: "How It Works",
        step1Title: "1. Upload Your Selfie",
        step1Desc: "Take a quick photo or upload one from your gallery. Our AI creates a digital model of you.",
        step2Title: "2. Shop Anywhere",
        step2Desc: "Browse your favorite stores. Right-click on any item you like to try it on.",
        step3Title: "3. Instant Try-On",
        step3Desc: "See yourself wearing the item instantly. Mix and match styles before you buy.",
        tariffsTitle: "Simple Pricing",
        tariffOnTheGo: "On the go",
        priceOnTheGo: "0.4$",
        perCredit: "/ credit",
        tariffOnTheGoDesc: "Top up whatever you like. Perfect for occasional use.",
        payAsYouGo: "Pay as you go",
        noSubscription: "No subscription",
        popular: "Popular",
        tariffStarter: "Starter",
        priceStarter: "10$",
        perMonth: "/ month",
        tariffStarterDesc: "Great for regular shoppers.",
        credits: "credits",
        save20: "Save ~20%",
        tariffStandard: "Standard",
        priceStandard: "20$",
        tariffStandardDesc: "For the fashion enthusiasts.",
        save30: "Save ~30%",
        anyWebsite: "Any Website",
        legalText: ""
    },
    ru: {
        getExtension: "Скачать расширение",
        heroTitle: "Примеряй одежду с <span class=\"gradient-text\">любого сайта</span>",
        heroSubtitle: "Будущее онлайн-шопинга уже здесь. Используй свое фото для виртуальной примерки нарядов из любого магазина.",
        addToChrome: "Добавить в Chrome",
        learnMore: "Узнать больше",
        howItWorks: "Как это работает",
        step1Title: "1. Загрузи селфи",
        step1Desc: "Сделай фото или загрузи из галереи. Наш ИИ создаст твою цифровую модель.",
        step2Title: "2. Выбирай одежду",
        step2Desc: "Листай любимые магазины. Кликни правой кнопкой мыши на вещь, чтобы примерить.",
        step3Title: "3. Мгновенная примерка",
        step3Desc: "Увидишь себя в обновке мгновенно. Сочетай стили перед покупкой.",
        tariffsTitle: "Тарифы",
        tariffOnTheGo: "На ходу",
        priceOnTheGo: "32 руб",
        perCredit: "/ кредит",
        tariffOnTheGoDesc: "Пополняй сколько хочешь. Идеально для редких покупок.",
        payAsYouGo: "Оплата за использование",
        noSubscription: "Без подписки",
        popular: "Популярный",
        tariffStarter: "Стартовый",
        priceStarter: "800 руб",
        perMonth: "/ месяц",
        tariffStarterDesc: "Для регулярного шопинга.",
        credits: "кредитов",
        save20: "Экономия ~20%",
        tariffStandard: "Стандарт",
        priceStandard: "1600 руб",
        tariffStandardDesc: "Для фанатов моды.",
        save30: "Экономия ~30%",
        anyWebsite: "Любого Сайта",
        legalText: "Рева Артем Владимирович ИНН 575400352100"
    },
    de: {
        getExtension: "Erweiterung holen",
        heroTitle: "Kleidung von <span class=\"gradient-text\">jeder Website</span> anprobieren",
        heroSubtitle: "Erlebe die Zukunft des Online-Shoppings. Nutze dein Foto, um Outfits virtuell anzuprobieren.",
        addToChrome: "Zu Chrome hinzufügen",
        learnMore: "Mehr erfahren",
        howItWorks: "Wie es funktioniert",
        step1Title: "1. Selfie hochladen",
        step1Desc: "Mach ein Foto oder lade es hoch. Unsere KI erstellt dein digitales Modell.",
        step2Title: "2. Überall shoppen",
        step2Desc: "Stöbere in deinen Lieblingsshops. Rechtsklick auf einen Artikel zum Anprobieren.",
        step3Title: "3. Sofort anprobieren",
        step3Desc: "Sieh dich sofort im neuen Outfit. Kombiniere Styles vor dem Kauf.",
        tariffsTitle: "Preise",
        tariffOnTheGo: "Unterwegs",
        priceOnTheGo: "0.4$",
        perCredit: "/ Credit",
        tariffOnTheGoDesc: "Lade so viel auf, wie du willst. Perfekt für gelegentliche Nutzung.",
        payAsYouGo: "Pay as you go",
        noSubscription: "Kein Abo",
        popular: "Beliebt",
        tariffStarter: "Starter",
        priceStarter: "10$",
        perMonth: "/ Monat",
        tariffStarterDesc: "Ideal für regelmäßige Shopper.",
        credits: "Credits",
        save20: "~20% sparen",
        tariffStandard: "Standard",
        priceStandard: "20$",
        tariffStandardDesc: "Für Modebegeisterte.",
        save30: "~30% sparen",
        anyWebsite: "Jeder Website",
        legalText: ""
    },
    es: {
        getExtension: "Obtener extensión",
        heroTitle: "Pruébate ropa de <span class=\"gradient-text\">cualquier sitio web</span>",
        heroSubtitle: "Experimenta el futuro de las compras online. Usa tu foto para probarte ropa virtualmente.",
        addToChrome: "Añadir a Chrome",
        learnMore: "Saber más",
        howItWorks: "Cómo funciona",
        step1Title: "1. Sube tu selfie",
        step1Desc: "Toma una foto o súbela. Nuestra IA crea tu modelo digital.",
        step2Title: "2. Compra donde quieras",
        step2Desc: "Navega por tus tiendas favoritas. Clic derecho en cualquier artículo para probártelo.",
        step3Title: "3. Pruébatelo al instante",
        step3Desc: "Vete con la prenda puesta al instante. Combina estilos antes de comprar.",
        tariffsTitle: "Precios",
        tariffOnTheGo: "Sobre la marcha",
        priceOnTheGo: "0.4$",
        perCredit: "/ crédito",
        tariffOnTheGoDesc: "Recarga lo que quieras. Perfecto para uso ocasional.",
        payAsYouGo: "Pago por uso",
        noSubscription: "Sin suscripción",
        popular: "Popular",
        tariffStarter: "Starter",
        priceStarter: "10$",
        perMonth: "/ mes",
        tariffStarterDesc: "Genial para compradores habituales.",
        credits: "créditos",
        save20: "Ahorra ~20%",
        tariffStandard: "Estándar",
        priceStandard: "20$",
        tariffStandardDesc: "Para entusiastas de la moda.",
        save30: "Ahorra ~30%",
        anyWebsite: "Cualquier Sitio Web",
        legalText: ""
    }
};

document.addEventListener('DOMContentLoaded', () => {
    const langSelect = document.getElementById('language-select');
    
    // 1. Check URL param
    const urlParams = new URLSearchParams(window.location.search);
    const urlLang = urlParams.get('lang');

    // 2. Check localStorage
    const savedLang = localStorage.getItem('webwardrobe_lang');

    // 3. Determine language (URL > Saved > Default 'en')
    let currentLang = 'en';
    if (urlLang && translations[urlLang]) {
        currentLang = urlLang;
    } else if (savedLang && translations[savedLang]) {
        currentLang = savedLang;
    }

    // Initialize
    langSelect.value = currentLang;
    updateLanguage(currentLang);

    langSelect.addEventListener('change', (e) => {
        const lang = e.target.value;
        localStorage.setItem('webwardrobe_lang', lang);
        
        // Update URL without reloading
        const newUrl = new URL(window.location);
        newUrl.searchParams.set('lang', lang);
        window.history.pushState({}, '', newUrl);

        updateLanguage(lang);
    });

    function updateLanguage(lang) {
        const t = translations[lang];
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (t[key] !== undefined) {
                el.innerHTML = t[key];
            }
        });
    }
});
